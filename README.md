# Методы сравнения изображения в Python

Установка дополнительных библиотек

```sh
pip3 install Pillow
pip3 install ImageHash
```

## Алгоритмы:
* Average hashing - ahash
* Perceptual hashing - phash
* Difference hashing - dhash

## Average hash - ahash

Как выглядит хэш

```sh
Average hashing 
```

#### Тестирование 

###### Изображение с исправлениями

||Изображение 1|Изображение 2|
|-----|-----|-----|
|Изображение|![Image1](img/kvar_1.jpg)|![Image2](img/kvar_2.jpg)|
|ahash|bcfe3f1f3f674300|bcfe3f1f3f634300|

Разница хэша: 1

###### Обрезка изображения

||Изображение 3|Изображение 4|
|-----|-----|-----|
|Изображение|![Image3](img/kvar_3.jpg)|![Image4](img/kvar_4.jpg)|
|ahash|181c7c7e7e7e581c|3cbc5cde7ed2b018|

Разница хэша: 16

###### Отзеркаливание изображения

||Изображение 5|Изображение 6|
|-----|-----|-----|
|Изображение|![Image5](img/kvar_5.jpg)|![Image6](img/kvar_6.jpg)|
|ahash|7f7f1b1b0e0c2cfc|fefed8d87030343f|

Разница хэша: 28

###### Разные изображения

||Изображение 1|Изображение 3|
|-----|-----|-----|
|Изображение|![Image1](img/kvar_1.jpg)|![Image3](img/kvar_3.jpg)|
|ahash|bcfe3f1f3f674300|181c7c7e7e7e581c|

Разница хэша: 25

### Скорость выполнения

Вычисления хэша в цикле 1000 раз (для одного изображения с учетом загрузки изображения каждый раз): 11.00889253616333

Вычисление хэша в цикле 1000 раз (для одного изображения, при загрузке изображения один раз): 4.383460283279419


## Перцептивный хэш - phash

Как выглядит хэш:
```sh
98ace3532c6d6c39
```

#### Тестирование 

###### Изображение с исправлениями

||Изображение 1|Изображение 2|
|-----|-----|-----|
|Изображение|![Image1](img/kvar_1.jpg)|![Image2](img/kvar_2.jpg)|
|phash|92de50cb1b6b4f81|82df50cb1b6b4f81|

Разница хэша: 2

###### Обрезка изображения

||Изображение 3|Изображение 4|
|-----|-----|-----|
|Изображение|![Image3](img/kvar_3.jpg)|![Image4](img/kvar_4.jpg)|
|phash|d1927eed8361234e|d49b4f6791f9a003|

Разница хэша: 22

###### Отзеркаливание изображения

||Изображение 5|Изображение 6|
|-----|-----|-----|
|Изображение|![Image5](img/kvar_5.jpg)|![Image6](img/kvar_6.jpg)|
|phash|98ace3532c6d6c39|cdf9960679383964|

Разница хэша: 34

###### Разные изображения

||Изображение 1|Изображение 3|
|-----|-----|-----|
|Изображение|![Image1](img/kvar_1.jpg)|![Image3](img/kvar_3.jpg)|
|phash|92de50cb1b6b4f81|d1927eed8361234e|

Разница хэша: 28

### Скорость выполнения

Вычисления хэша в цикле 1000 раз (для одного изображения с учетом загрузки изображения каждый раз): 11.981847524642944

Вычисление хэша в цикле 1000 раз (для одного изображения, при загрузке изображения один раз): 5.083414316177368

## Перцептивный хэш - dhash

Как выглядит хэш:
```sh
70bce479ddc78fbc
```

#### Тестирование 

###### Изображение с исправлениями

||Изображение 1|Изображение 2|
|-----|-----|-----|
|Изображение|![Image1](img/kvar_1.jpg)|![Image2](img/kvar_2.jpg)|
|dhash|70bce479ddc78fbc|70bce47dddc78fbc|

Разница хэша: 1

###### Обрезка изображения

||Изображение 3|Изображение 4|
|-----|-----|-----|
|Изображение|![Image3](img/kvar_3.jpg)|![Image4](img/kvar_4.jpg)|
|dhash|e0b0d8d8d0d6b0b0|7070b8b8a0a62060|

Разница хэша: 19

###### Отзеркаливание изображения

||Изображение 5|Изображение 6|
|-----|-----|-----|
|Изображение|![Image5](img/kvar_5.jpg)|![Image6](img/kvar_6.jpg)|
|dhash|dad8b636b4d9d9b0|a4e49293d26464f2|

Разница хэша: 34

###### Разные изображения

||Изображение 1|Изображение 3|
|-----|-----|-----|
|Изображение|![Image1](img/kvar_1.jpg)|![Image3](img/kvar_3.jpg)|
|dhash|70bce479ddc78fbc|e0b0d8d8d0d6b0b0|

Разница хэша: 24

### Скорость выполнения

Вычисления хэша в цикле 1000 раз (для одного изображения с учетом загрузки изображения каждый раз): 11.836828708648682

Вычисление хэша в цикле 1000 раз (для одного изображения, при загрузке изображения один раз): 4.387693643569946


## Ссылки:
* ImageHash - https://pypi.org/project/ImageHash/